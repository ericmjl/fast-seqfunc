
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ericmjl.github.io/fast-seqfunc/design/additional_predictors/">
      
      
        <link rel="prev" href="../../roadmap/">
      
      
        <link rel="next" href="../additional_predictors_example/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Additional Predictors in Fast-SeqFunc: Design Document - fast-seqfunc</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../apidocs.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#additional-predictors-in-fast-seqfunc-design-document" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="fast-seqfunc" class="md-header__button md-logo" aria-label="fast-seqfunc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96m0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            fast-seqfunc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Additional Predictors in Fast-SeqFunc: Design Document
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ericmjl/fast-seqfunc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    ericmjl/fast-seqfunc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="fast-seqfunc" class="md-nav__button md-logo" aria-label="fast-seqfunc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96m0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"/></svg>

    </a>
    fast-seqfunc
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ericmjl/fast-seqfunc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    ericmjl/fast-seqfunc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fast-SeqFunc Documentation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Top-level API for fast-seqfunc
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fast-SeqFunc Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Design
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Additional Predictors in Fast-SeqFunc: Design Document
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Additional Predictors in Fast-SeqFunc: Design Document
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design-goals" class="md-nav__link">
    <span class="md-ellipsis">
      Design Goals
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-components-affected" class="md-nav__link">
    <span class="md-ellipsis">
      Core Components Affected
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-flow-modifications" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow Modifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-design" class="md-nav__link">
    <span class="md-ellipsis">
      API Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-api-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Python API Changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python API Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current-api" class="md-nav__link">
    <span class="md-ellipsis">
      Current API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enhanced-api" class="md-nav__link">
    <span class="md-ellipsis">
      Enhanced API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#predict-function-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Predict Function Changes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-changes" class="md-nav__link">
    <span class="md-ellipsis">
      CLI Changes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#feature-combination-method" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Combination Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-processing-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Data Processing Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-validation-and-preprocessing" class="md-nav__link">
    <span class="md-ellipsis">
      Data Validation and Preprocessing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-information-enhancement" class="md-nav__link">
    <span class="md-ellipsis">
      Model Information Enhancement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serialization-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Serialization Changes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-changes-required" class="md-nav__link">
    <span class="md-ellipsis">
      Code Changes Required
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code Changes Required">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#in-corepy" class="md-nav__link">
    <span class="md-ellipsis">
      In core.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-modelspy" class="md-nav__link">
    <span class="md-ellipsis">
      In models.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-clipy" class="md-nav__link">
    <span class="md-ellipsis">
      In cli.py
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backwards-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Backwards Compatibility
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Strategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements" class="md-nav__link">
    <span class="md-ellipsis">
      Future Enhancements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../additional_predictors_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Additional Predictors: Usage Examples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom_alphabets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Alphabets Design Document
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fast-SeqFunc: Design Document
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Releases
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Releases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../releases/v0.0.3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V0.0.3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../releases/v0.1.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V0.1.0
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../releases/v0.1.1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V0.1.1
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/classification_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sequence Classification with Fast-SeqFunc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/regression_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sequence Regression with Fast-SeqFunc
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design-goals" class="md-nav__link">
    <span class="md-ellipsis">
      Design Goals
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-components-affected" class="md-nav__link">
    <span class="md-ellipsis">
      Core Components Affected
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-flow-modifications" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow Modifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-design" class="md-nav__link">
    <span class="md-ellipsis">
      API Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-api-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Python API Changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python API Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current-api" class="md-nav__link">
    <span class="md-ellipsis">
      Current API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enhanced-api" class="md-nav__link">
    <span class="md-ellipsis">
      Enhanced API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#predict-function-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Predict Function Changes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-changes" class="md-nav__link">
    <span class="md-ellipsis">
      CLI Changes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#feature-combination-method" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Combination Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-processing-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Data Processing Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-validation-and-preprocessing" class="md-nav__link">
    <span class="md-ellipsis">
      Data Validation and Preprocessing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-information-enhancement" class="md-nav__link">
    <span class="md-ellipsis">
      Model Information Enhancement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serialization-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Serialization Changes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-changes-required" class="md-nav__link">
    <span class="md-ellipsis">
      Code Changes Required
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code Changes Required">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#in-corepy" class="md-nav__link">
    <span class="md-ellipsis">
      In core.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-modelspy" class="md-nav__link">
    <span class="md-ellipsis">
      In models.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-clipy" class="md-nav__link">
    <span class="md-ellipsis">
      In cli.py
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backwards-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Backwards Compatibility
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Strategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements" class="md-nav__link">
    <span class="md-ellipsis">
      Future Enhancements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="additional-predictors-in-fast-seqfunc-design-document">Additional Predictors in Fast-SeqFunc: Design Document</h1>
<h2 id="overview">Overview</h2>
<p>Fast-SeqFunc is designed to model the relationship between biological sequences and a target function/property. Currently, it supports using only the sequence as the predictor. This design document outlines the necessary changes to expand Fast-SeqFunc to incorporate additional predictor columns alongside the sequence data.</p>
<h2 id="motivation">Motivation</h2>
<p>In many real-world applications, sequence-function relationships may depend on additional contextual variables or experimental conditions. For example:</p>
<ol>
<li>Protein function might depend not only on the amino acid sequence but also on pH, temperature, or salt concentration</li>
<li>Gene expression levels may depend on the DNA sequence as well as cell type, developmental stage, or treatment conditions</li>
<li>Binding affinity might depend on sequence and additional information about binding partners</li>
</ol>
<p>By supporting additional predictor columns, Fast-SeqFunc will become more versatile and applicable to a wider range of biological problems where context matters.</p>
<h2 id="design-goals">Design Goals</h2>
<ol>
<li><strong>Maintain API Simplicity</strong>: Preserve the current simple API while extending it to handle additional predictors</li>
<li><strong>Backward Compatibility</strong>: Ensure existing code continues to work without changes</li>
<li><strong>Flexible Integration</strong>: Allow for simple integration of sequence embeddings with additional predictors</li>
<li><strong>CLI Support</strong>: Extend the command-line interface to handle additional predictor columns</li>
<li><strong>Consistent Implementation</strong>: Apply changes consistently across both the Python API and CLI</li>
</ol>
<h2 id="architecture-changes">Architecture Changes</h2>
<h3 id="core-components-affected">Core Components Affected</h3>
<ol>
<li><strong>Core API</strong> (<code>core.py</code>):</li>
<li>Extend <code>train_model</code> function to accept additional predictor columns</li>
<li>
<p>Modify data processing to incorporate additional predictors with embeddings</p>
</li>
<li>
<p><strong>Models</strong> (<code>models.py</code>):</p>
</li>
<li>
<p>Update <code>SequenceFunctionModel</code> to handle additional predictors alongside sequence embeddings</p>
</li>
<li>
<p><strong>CLI</strong> (<code>cli.py</code>):</p>
</li>
<li>Add options to specify additional predictor columns</li>
<li>
<p>Update data processing for CLI commands</p>
</li>
<li>
<p><strong>Documentation</strong>:</p>
</li>
<li>Update API reference</li>
<li>Add examples showing how to use additional predictors</li>
</ol>
<h3 id="data-flow-modifications">Data Flow Modifications</h3>
<p>Current data flow:</p>
<ol>
<li>User provides sequences + target values</li>
<li>Sequences are embedded</li>
<li>ML models are trained on embeddings</li>
</ol>
<p>New data flow:</p>
<ol>
<li>User provides sequences + additional predictors + target values</li>
<li>Sequences are embedded</li>
<li>Embeddings are combined with additional predictors</li>
<li>ML models are trained on the combined features</li>
</ol>
<h2 id="api-design">API Design</h2>
<h3 id="python-api-changes">Python API Changes</h3>
<h4 id="current-api">Current API</h4>
<div class="highlight"><pre><span></span><code><span class="n">model_info</span> <span class="o">=</span> <span class="n">train_model</span><span class="p">(</span>
    <span class="n">train_data</span><span class="o">=</span><span class="n">train_data</span><span class="p">,</span>
    <span class="n">test_data</span><span class="o">=</span><span class="n">test_data</span><span class="p">,</span>
    <span class="n">sequence_col</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
    <span class="n">target_col</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">,</span>
    <span class="n">embedding_method</span><span class="o">=</span><span class="s2">&quot;one-hot&quot;</span><span class="p">,</span>
    <span class="n">model_type</span><span class="o">=</span><span class="s2">&quot;regression&quot;</span><span class="p">,</span>
    <span class="n">optimization_metric</span><span class="o">=</span><span class="s2">&quot;r2&quot;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="enhanced-api">Enhanced API</h4>
<div class="highlight"><pre><span></span><code><span class="n">model_info</span> <span class="o">=</span> <span class="n">train_model</span><span class="p">(</span>
    <span class="n">train_data</span><span class="o">=</span><span class="n">train_data</span><span class="p">,</span>
    <span class="n">test_data</span><span class="o">=</span><span class="n">test_data</span><span class="p">,</span>
    <span class="n">sequence_col</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
    <span class="n">target_col</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">,</span>
    <span class="n">additional_predictor_cols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pH&quot;</span><span class="p">,</span> <span class="s2">&quot;temperature&quot;</span><span class="p">],</span>  <span class="c1"># New parameter</span>
    <span class="n">embedding_method</span><span class="o">=</span><span class="s2">&quot;one-hot&quot;</span><span class="p">,</span>
    <span class="n">model_type</span><span class="o">=</span><span class="s2">&quot;regression&quot;</span><span class="p">,</span>
    <span class="n">optimization_metric</span><span class="o">=</span><span class="s2">&quot;r2&quot;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="predict-function-changes">Predict Function Changes</h4>
<p>Current:</p>
<div class="highlight"><pre><span></span><code><span class="n">predictions</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">model_info</span><span class="p">,</span> <span class="n">new_sequences</span><span class="p">)</span>
</code></pre></div>
<p>Enhanced:</p>
<div class="highlight"><pre><span></span><code><span class="n">predictions</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span>
    <span class="n">model_info</span><span class="p">,</span>
    <span class="n">new_data</span><span class="p">,</span>  <span class="c1"># Now can be DataFrame with sequence and additional predictor columns</span>
    <span class="n">sequence_col</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="cli-changes">CLI Changes</h3>
<p>Current CLI:</p>
<div class="highlight"><pre><span></span><code>fast-seqfunc<span class="w"> </span>train<span class="w"> </span>train_data.csv<span class="w"> </span>--sequence-col<span class="w"> </span>sequence<span class="w"> </span>--target-col<span class="w"> </span><span class="k">function</span>
</code></pre></div>
<p>Enhanced CLI:</p>
<div class="highlight"><pre><span></span><code>fast-seqfunc<span class="w"> </span>train<span class="w"> </span>train_data.csv<span class="w"> </span>--sequence-col<span class="w"> </span>sequence<span class="w"> </span>--target-col<span class="w"> </span><span class="k">function</span><span class="w"> </span>--additional-predictors<span class="w"> </span>pH,temperature
</code></pre></div>
<h2 id="implementation-strategy">Implementation Strategy</h2>
<h3 id="feature-combination-method">Feature Combination Method</h3>
<p>The implementation will use a simple concatenation approach to combine sequence embeddings with additional predictors. This means that additional predictor columns will be appended to the sequence embedding features to create the final feature matrix for model training.</p>
<h3 id="data-processing-flow">Data Processing Flow</h3>
<ol>
<li>Load CSV or DataFrame data as currently implemented</li>
<li>Validate presence of additional predictor columns if specified</li>
<li>Embed sequence data using the existing embedding pipeline</li>
<li>Process additional predictors (scaling, handling missing values, etc.)</li>
<li>Combine sequence embeddings with additional predictors</li>
<li>Train models on the combined feature set</li>
</ol>
<h3 id="data-validation-and-preprocessing">Data Validation and Preprocessing</h3>
<p>Additional predictors may require preprocessing:</p>
<ul>
<li>Handling missing values</li>
<li>Scaling numerical features</li>
<li>Encoding categorical features</li>
<li>Type validation</li>
</ul>
<p>We'll implement a preprocessing pipeline for additional predictors that handles these tasks automatically.</p>
<h2 id="model-information-enhancement">Model Information Enhancement</h2>
<p>The model_info dictionary will be enhanced to include:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">trained_model</span><span class="p">,</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="n">model_type</span><span class="p">,</span>
    <span class="s2">&quot;embedder&quot;</span><span class="p">:</span> <span class="n">embedder</span><span class="p">,</span>
    <span class="s2">&quot;embed_cols&quot;</span><span class="p">:</span> <span class="n">embed_cols</span><span class="p">,</span>
    <span class="s2">&quot;additional_predictor_cols&quot;</span><span class="p">:</span> <span class="n">additional_predictor_cols</span><span class="p">,</span>  <span class="c1"># New</span>
    <span class="s2">&quot;additional_predictor_preprocessing&quot;</span><span class="p">:</span> <span class="n">preprocessing_pipeline</span><span class="p">,</span>  <span class="c1"># New</span>
    <span class="s2">&quot;test_results&quot;</span><span class="p">:</span> <span class="n">test_results</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>This ensures all information needed for making predictions with additional predictors is preserved.</p>
<h2 id="serialization-changes">Serialization Changes</h2>
<p>The model serialization format will need to include information about additional predictors. We'll maintain backward compatibility by checking for the presence of additional predictor information when loading existing models.</p>
<h2 id="code-changes-required">Code Changes Required</h2>
<h3 id="in-corepy">In <code>core.py</code></h3>
<ol>
<li>Update <code>train_model</code> function signature to accept additional predictors</li>
<li>Modify data processing to handle additional predictors</li>
<li>Update model information dictionary to include additional predictor metadata</li>
<li>Modify <code>predict</code> function to handle additional predictors in prediction data</li>
</ol>
<h3 id="in-modelspy">In <code>models.py</code></h3>
<ol>
<li>Update <code>SequenceFunctionModel</code> class to handle additional predictors</li>
<li>Modify the <code>fit</code> and <code>predict</code> methods to incorporate additional predictors</li>
<li>Update serialization methods to handle additional predictor information</li>
</ol>
<h3 id="in-clipy">In <code>cli.py</code></h3>
<ol>
<li>Add new CLI options for specifying additional predictors</li>
<li>Update data loading and processing in CLI commands</li>
<li>Update help text and documentation</li>
</ol>
<h2 id="backwards-compatibility">Backwards Compatibility</h2>
<p>To maintain backward compatibility:</p>
<ul>
<li>All new parameters will be optional with sensible defaults</li>
<li>Existing code paths will work without modification</li>
<li>Model serialization will be backward compatible</li>
</ul>
<h2 id="testing-strategy">Testing Strategy</h2>
<p>Tests will be expanded to cover:</p>
<ol>
<li>Training with various combinations of additional predictors</li>
<li>Making predictions with additional predictors</li>
<li>Serialization and deserialization of models with additional predictor information</li>
<li>CLI functionality for additional predictors</li>
<li>Edge cases (missing values, type mismatches, etc.)</li>
</ol>
<h2 id="future-enhancements">Future Enhancements</h2>
<ol>
<li>Add automated feature selection for additional predictors</li>
<li>Support for feature importance analysis that includes additional predictors</li>
<li>Add specialized visualizations for understanding the impact of additional predictors</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>Adding support for additional predictor columns will significantly enhance the versatility of Fast-SeqFunc, making it applicable to a wider range of biological problems where context matters alongside sequence. The implementation will maintain the simplicity and user-friendliness of the current API while providing powerful new capabilities.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ericmjl" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["instant", "tabs"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../config.js"></script>
      
    
  </body>
</html>